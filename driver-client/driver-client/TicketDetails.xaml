<Page x:Class="driver_client.TicketDetails"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      d:DesignHeight="600" d:DesignWidth="900"
      Title="TicketDetails"
      Background="#0E1A2B">

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Background -->
        <Image Source="/picture/background.png"
               Stretch="UniformToFill"
               Opacity="0.06"
               Grid.ColumnSpan="2"
               Panel.ZIndex="0"/>

        <!-- Main Content -->
        <Border Grid.Column="0" 
                Background="#1B2A40"
                CornerRadius="10"
                Padding="20"
                Margin="0,0,10,0"
                Panel.ZIndex="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Ticket Header -->
                <StackPanel Grid.Row="0">
                    <TextBlock x:Name="TicketTitle"
                               Text="Ticket #123"
                               FontSize="24"
                               FontWeight="Bold"
                               Foreground="#00E0FF"
                               Margin="0,0,0,10"/>

                    <TextBlock x:Name="TicketSubject"
                               Text="Subject"
                               FontSize="18"
                               Foreground="White"
                               TextWrapping="Wrap"
                               Margin="0,0,0,10"/>

                    <TextBlock x:Name="TicketDescription"
                               Text="Description"
                               FontSize="14"
                               Foreground="LightGray"
                               TextWrapping="Wrap"
                               Margin="0,0,0,15"/>

                    <Separator Background="#00E0FF" Margin="0,0,0,15"/>
                </StackPanel>

                <!-- Messages -->
                <ScrollViewer Grid.Row="1" 
                             VerticalScrollBarVisibility="Auto"
                             x:Name="MessagesScroll">
                    <StackPanel x:Name="MessagesPanel"/>
                </ScrollViewer>

                <!-- Reply Section -->
                <StackPanel Grid.Row="2" Margin="0,15,0,0">
                    <TextBlock Text="Add Reply"
                               FontSize="14"
                               Foreground="LightGray"
                               FontWeight="SemiBold"
                               Margin="0,0,0,6"/>

                    <Border BorderBrush="#00C0CC"
                            BorderThickness="1"
                            CornerRadius="3"
                            Background="#223344"
                            Margin="0,0,0,10">
                        <TextBox x:Name="ReplyBox"
                                 Height="80"
                                 Background="Transparent"
                                 Foreground="White"
                                 BorderThickness="0"
                                 Padding="8"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 VerticalScrollBarVisibility="Auto"/>
                    </Border>

                    <Button Content="Send Reply"
                            Width="120"
                            Height="35"
                            HorizontalAlignment="Right"
                            Background="#00E0FF"
                            Foreground="Black"
                            FontWeight="Bold"
                            BorderBrush="#00C0CC"
                            Cursor="Hand"
                            Click="SendReply_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Sidebar -->
        <Border Grid.Column="1"
                Background="#1B2A40"
                CornerRadius="10"
                Padding="20"
                Panel.ZIndex="1">
            <StackPanel>
                <TextBlock Text="Ticket Information"
                           FontSize="18"
                           FontWeight="Bold"
                           Foreground="#00E0FF"
                           Margin="0,0,0,15"/>

                <!-- Status -->
                <TextBlock Text="Status"
                           FontSize="12"
                           Foreground="Gray"
                           Margin="0,0,0,4"/>
                <Border x:Name="StatusBadge"
                        Background="Blue"
                        CornerRadius="3"
                        Padding="8,4"
                        Margin="0,0,0,15"
                        HorizontalAlignment="Left">
                    <TextBlock x:Name="StatusText"
                               Text="Open"
                               Foreground="White"
                               FontWeight="Bold"/>
                </Border>

                <!-- Priority -->
                <TextBlock Text="Priority"
                           FontSize="12"
                           Foreground="Gray"
                           Margin="0,0,0,4"/>
                <Border x:Name="PriorityBadge"
                        Background="Orange"
                        CornerRadius="3"
                        Padding="8,4"
                        Margin="0,0,0,15"
                        HorizontalAlignment="Left">
                    <TextBlock x:Name="PriorityText"
                               Text="Medium"
                               Foreground="White"
                               FontWeight="Bold"/>
                </Border>

                <!-- Dates -->
                <TextBlock Text="Created"
                           FontSize="12"
                           Foreground="Gray"
                           Margin="0,0,0,4"/>
                <TextBlock x:Name="CreatedText"
                           Text="01/01/2025 10:00"
                           Foreground="White"
                           Margin="0,0,0,10"/>

                <TextBlock x:Name="UpdatedLabel"
                           Text="Last Updated"
                           FontSize="12"
                           Foreground="Gray"
                           Margin="0,0,0,4"
                           Visibility="Collapsed"/>
                <TextBlock x:Name="UpdatedText"
                           Text="01/01/2025 15:00"
                           Foreground="White"
                           Margin="0,0,0,10"
                           Visibility="Collapsed"/>

                <!-- Assigned To -->
                <TextBlock x:Name="AssignedLabel"
                           Text="Assigned To"
                           FontSize="12"
                           Foreground="Gray"
                           Margin="0,0,0,4"
                           Visibility="Collapsed"/>
                <TextBlock x:Name="AssignedText"
                           Text="Admin User"
                           Foreground="#00E0FF"
                           Margin="0,0,0,15"
                           Visibility="Collapsed"/>

                <Separator Background="#00E0FF" Margin="0,10,0,15"/>

                <!-- Back Button -->
                <Button Content="← Back to Tickets"
                        Background="Transparent"
                        Foreground="#00E0FF"
                        BorderBrush="#00E0FF"
                        FontWeight="Bold"
                        Height="35"
                        Cursor="Hand"
                        Click="Back_Click"/>
            </StackPanel>
        </Border>

        <Frame x:Name="page" Grid.ColumnSpan="2" Margin="-20,-20,-20,-20" Panel.ZIndex="100"/>
    </Grid>
</Page>